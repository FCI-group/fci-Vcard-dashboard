(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c8390f0"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"223c":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toastification"},[a("div",{staticClass:"d-flex align-items-start"},[a("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:e.variant,size:"1.8rem"}},[a("feather-icon",{attrs:{icon:e.icon,size:"15"}})],1),a("div",{staticClass:"d-flex flex-grow-1"},[a("div",[e.title?a("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+e.variant,domProps:{textContent:e._s(e.title)}}):e._e(),e.text?a("small",{staticClass:"d-inline-block text-body",domProps:{textContent:e._s(e.text)}}):e._e()]),a("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(t){return e.$emit("close-toast")}}},[e.hideClose?e._e():a("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},o=[],n=a("e8a3"),i={components:{BAvatar:n["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},s=i,l=(a("b549"),a("2877")),d=Object(l["a"])(s,r,o,!1,null,"55dd3057",null);t["a"]=d.exports},2669:function(e,t,a){},"47bc":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("a6f4");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=Object(r["ref"])(null),o=function(){a.value.reset()},n=function(e){var t=e.dirty,a=e.validated,r=e.required,o=e.changed,n=e.valid,i=void 0===n?null:n,s=t||a?i:null;return r||o?s:null},i=function(){e(),Object(r["nextTick"])((function(){o()}))},s=function(){t(),Object(r["nextTick"])((function(){o()}))};return{refFormObserver:a,resetObserver:o,getValidationState:n,resetForm:i,clearForm:s}}},"841c":function(e,t,a){"use strict";var r=a("d784"),o=a("825a"),n=a("1d80"),i=a("129f"),s=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var n=o(e),l=String(this),d=n.lastIndex;i(d,0)||(n.lastIndex=0);var c=s(n,l);return i(n.lastIndex,d)||(n.lastIndex=d),null===c?-1:c.index}]}))},"8d81":function(e,t,a){},a799:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",[a("validation-observer",{ref:"infoRules",attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.invalid;return[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{name:"Name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"Name","label-for":"name"}},[a("b-form-select",{attrs:{id:"name",state:e.getValidationState(t)},on:{change:e.onNameChange},model:{value:e.selectedName,callback:function(t){e.selectedName=t},expression:"selectedName"}},[e._l(e.nameOptions,(function(t){return a("b-form-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),a("b-form-select-option",{attrs:{value:"other"}},[e._v(" Other ")])],2),"other"===e.selectedName?a("b-form-input",{staticClass:"mt-3",attrs:{state:e.getValidationState(t),trim:"",placeholder:"Enter custom name"},model:{value:e.deviceForm.name,callback:function(t){e.$set(e.deviceForm,"name",t)},expression:"deviceForm.name"}}):e._e(),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{name:"brand",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"Brand","label-for":"Brand"}},[a("b-form-input",{attrs:{id:"brand",state:e.getValidationState(t),trim:"",placeholder:"Brand"},model:{value:e.deviceForm.brand,callback:function(t){e.$set(e.deviceForm,"brand",t)},expression:"deviceForm.brand"}}),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{name:"model_number",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"model number","label-for":"model number"}},[a("b-form-input",{attrs:{id:"model_number",state:e.getValidationState(t),type:"number",placeholder:"model number"},model:{value:e.deviceForm.model_number,callback:function(t){e.$set(e.deviceForm,"model_number",t)},expression:"deviceForm.model_number"}}),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{name:"serial_number",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"serial number","label-for":"serial number"}},[a("b-form-input",{attrs:{id:"Whats app",state:e.getValidationState(t),trim:"",type:"number",placeholder:"serial number"},model:{value:e.deviceForm.serial_number,callback:function(t){e.$set(e.deviceForm,"serial_number",t)},expression:"deviceForm.serial_number"}}),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{name:"purchased_date",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"purchased_date","label-for":"purchased_date"}},[a("b-form-input",{attrs:{id:"purchased_date",type:"date",state:e.getValidationState(t),trim:"",placeholder:"purchased_date"},model:{value:e.deviceForm.purchased_date,callback:function(t){e.$set(e.deviceForm,"purchased_date",t)},expression:"deviceForm.purchased_date"}}),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{name:"notes",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"notes","label-for":"notes"}},[a("b-form-input",{attrs:{id:"notes",state:e.getValidationState(t),trim:"",placeholder:"notes"},model:{value:e.deviceForm.notes,callback:function(t){e.$set(e.deviceForm,"notes",t)},expression:"deviceForm.notes"}}),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{rules:"required",name:"employee"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"employee ","label-for":"employee"}},[a("b-form-select",{attrs:{id:"employee",options:e.optionsEmployee,type:"search",trim:"",placeholder:"employee",state:e.getValidationState(t)},model:{value:e.deviceForm.employee_id,callback:function(t){e.$set(e.deviceForm,"employee_id",t)},expression:"deviceForm.employee_id"}}),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("validation-provider",{attrs:{rules:"required",name:"branch"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-form-group",{attrs:{label:"branch ","label-for":"branch"}},[a("b-form-select",{attrs:{id:"branch",options:e.optionsBranch,type:"search",trim:"",placeholder:"branch",state:e.getValidationState(t)},model:{value:e.deviceForm.branch_id,callback:function(t){e.$set(e.deviceForm,"branch_id",t)},expression:"deviceForm.branch_id"}}),a("b-form-invalid-feedback",[e._v(" "+e._s(t.errors[0])+" ")])],1)]}}],null,!0)})],1),a("b-col",{attrs:{md:"6"}},[a("b-media",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-media-aside",[a("b-link",[a("b-img",{directives:[{name:"img",rawName:"v-img"}],ref:"previewEl",attrs:{rounded:"",src:e.deviceForm.photo,width:"100",height:"100"}})],1)],1),a("b-media-body",[a("b-button",{staticClass:"mb-75 mr-75",attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.selectFile()}}},[e._v(" Upload photo ")]),a("b-form-file",{ref:"refInputEl",attrs:{accept:".jpg, .png, .jpeg",hidden:!0,plain:""},on:{change:function(t){return e.changeProfile(t)}}})],1)],1)],1),e.errorMsg?a("b-col",{attrs:{cols:"12"}},[a("p",{staticClass:"text-danger"},[e._v(" "+e._s(e.errorMsg)+" ")])]):e._e(),Object.values(e.errors).length>0?a("b-col",{attrs:{cols:"12"}},e._l(e.errors,(function(t,r,o){return a("p",{key:o,staticClass:"text-danger small"},[e._v(" "+e._s(t.toString())+" ")])})),0):e._e()],1),a("b-row",[a("b-col",{staticClass:"mt-50",attrs:{cols:"12"}},[!e.loader&&e.$route.params.id?a("b-button",{staticClass:"mr-1",attrs:{variant:"primary",disabled:r||Object.values(e.errors).length>0},on:{click:function(t){return e.addDevice()}}},[e._v(" Save Changes ")]):e._e(),e.loader||e.$route.params.id?e._e():a("b-button",{staticClass:"mr-1",attrs:{variant:"primary",disabled:r||Object.values(e.errors).length>0},on:{click:function(t){return e.addDevice()}}},[e._v(" Add ")]),e.loader?a("b-button",{staticClass:"mr-1",attrs:{variant:"primary",disabled:""}},[a("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):e._e()],1)],1)]}}])})],1)},o=[],n=(a("b0c0"),a("ac1f"),a("841c"),a("4de4"),a("caad"),a("2532"),a("d3b7"),a("d81d"),a("a6f4")),i=a("47bc"),s=a("8f03"),l=a("bc3a"),d=a.n(l),c=a("223c"),u=a("b91d"),m=a("7bb1");Object(m["c"])("url",{validate:function(e){var t=/^(ftp|http|https):\/\/[^ "]+$/;return t.test(e)},message:"Please enter a valid URL."});var p={components:{},mixins:[u["a"]],data:function(){return{loading:!1,selectedName:"",nameOptions:[],userLocation:{},position:{},branches:[],companies:[],errorMsg:"",required:s["b"],id:this.$store.state.generalIds.id,allSelected:[],indeterminate:!1,allPermissions:[],optionsEmployee:[],optionsBranch:[],loader:!1,validationErrors:{},errors:{},passwordFieldType:"text",search:"",selected:null,filteredOptions:[]}},setup:function(){var e=Object(i["a"])(),t=e.getValidationState,a=Object(n["ref"])({photo:null,branch_id:"",gulftic_device_id:"",name:"",brand:"",model_number:"",serial_number:"",purchased_date:"",notes:"",employee_id:{}}),r=Object(n["ref"])("");return{getValidationState:t,deviceForm:a,photo:r}},computed:{passwordToggleIcon:function(){return"password"===this.passwordFieldType?"EyeIcon":"EyeOffIcon"}},created:function(){this.filteredOptions=this.options},mounted:function(){this.showDevice(),this.getEmployee(),this.getBranch(),this.getDevices(),this.employeesForm.password=""},methods:{onNameChange:function(){"other"!==this.selectedName?this.deviceForm.name=this.selectedName:this.deviceForm.name=""},handleType:function(e){var t=e.srcElement,a=e.type,r=t.value;this.passwordFieldType="blur"!==a||r?"password":"text"},selectFile:function(){this.$refs.refInputEl.$el.click()},changeProfile:function(e){var t=this;this.photo=e.target.files[0];var a=e.target;if(a.files){var r=new FileReader;r.onload=function(e){t.deviceForm.photo=e.target.result},this.photo=a.files[0],r.readAsDataURL(a.files[0])}},filterOptions:function(){var e=this.search.toLowerCase();this.filteredOptions=this.options.filter((function(t){return t.text.toLowerCase().includes(e)}))},getEmployee:function(){var e=this;this.loadtable=!0,d.a.get("employees").then((function(t){e.optionsEmployee=t.data.data.employees.map((function(e){return{value:e.id,text:e.name}}))})).finally((function(){e.loadtable=!1}))},getBranch:function(){var e=this;this.loadtable=!0,d.a.get("https://FCI-vcard.tmam.app/api/branch").then((function(t){e.optionsBranch=t.data.data.map((function(e){return{value:e.id,text:e.name}}))})).finally((function(){e.loadtable=!1}))},getDevices:function(){var e=this;this.loadtable=!0,d.a.get("https://FCI-vcard.tmam.app/api/devices-list").then((function(t){e.nameOptions=t.data.data.map((function(e){return e.name}))})).finally((function(){e.loadtable=!1}))},showDevice:function(){var e=this;return!!this.$route.params.id&&(d.a.get("device/".concat(this.$route.params.id)).then((function(t){e.deviceForm=t.data.data,e.nameOptions.includes(t.data.data.name)?e.selectedName=t.data.data.name:(e.selectedName="other",e.deviceForm.name=t.data.data.name),e.deviceForm.employee_id=t.data.data.employee_id})),!0)},addDevice:function(){var e=this;if(this.$route.params.id){this.loader=!0;var t=new FormData;for(var a in t.append("_method","PUT"),this.deviceForm)"photo"!==a&&t.append(a,this.deviceForm[a]);t.append("photo",this.photo),d.a.post("device/".concat(this.$route.params.id),t).then((function(t){200===t.status&&(e.$router.push({name:"devices"}),e.$toasted.show("Updated Successfully",{position:"top-center",duration:3e3}))})).catch((function(t){500===t.response.status?e.$toast({component:c["a"],props:{title:"Ooops!!! An Unexpected Internal server error",icon:"BellIcon",variant:"danger"}}):422===t.response.status&&(void 0!==t.response.data.errors?e.errorMsg=t.response.data.errors:e.errorMsg=t.response.data.message)})).finally((function(){e.loader=!1}))}else{var r=new FormData;for(var o in this.deviceForm)"photo"!==o&&r.append(o,this.deviceForm[o]);this.photo&&r.append("photo",this.photo),this.loader=!0,d.a.post("device",r).then((function(t){200!==t.status&&201!==t.status||(e.$router.push({name:"devices"}),e.$toasted.show("Created Successfully",{position:"top-center",duration:3e3}))})).catch((function(t){500===t.response.status?e.$toast({component:c["a"],props:{title:"Ooops!!! An Unexpected Internal server error",icon:"BellIcon",variant:"danger"}}):422===t.response.status&&(void 0!==t.response.data.errors?e.errorMsg=t.response.data.errors:e.errorMsg=t.response.data.message)})).finally((function(){e.loader=!1}))}}}},f=p,v=(a("d87b"),a("2877")),b=Object(v["a"])(f,r,o,!1,null,null,null);t["default"]=b.exports},b549:function(e,t,a){"use strict";a("8d81")},b91d:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={data:function(){return{passwordFieldType:"password",pinFieldType:"password"}},methods:{togglePasswordVisibility:function(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password"},togglepinVisibility:function(){this.pinFieldType="password"===this.pinFieldType?"number":"password"}}}},d81d:function(e,t,a){"use strict";var r=a("23e7"),o=a("b727").map,n=a("1dde"),i=a("ae40"),s=n("map"),l=i("map");r({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},d87b:function(e,t,a){"use strict";a("2669")}}]);
//# sourceMappingURL=chunk-5c8390f0.73a9a92f.js.map